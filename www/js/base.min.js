$(function(){
  //content_resize
  var reset_height = $(window).height();
  $(".content_resize").css({"height":reset_height});
  //subpage
  if($("#subpage").length > 0){
    var $offset = $(".subpage_resize").width();
    var $status;
    function remove($offset,$status){
      if($status == "off"){
        $("#subpage").animate({"left":"0px"},function(){
          $("#off").attr({"class":"on","id":"on"}).html('<i class="icon-chevron-left"></i>');
        });
      } else {
        $("#subpage").animate({"left":-$offset},function(){
          $("#on").attr({"class":"off","id":"off"}).html('<i class="icon-chevron-right"></i>');
        });
      }
    }
    $("#subpage .subpage_resize").css({"height":reset_height});
    $("#subpage .subpage_ctrol").css({"height":reset_height});
    $(window).resize(function(){
      var resize_height = $(window).height();
      $("#subpage .subpage_resize").css({"height":resize_height});
      $("#subpage .subpage_ctrol").css({"height":resize_height});
    });
    $(window).scroll(function(){
      var resize_top = $(window).scrollTop();
      $("#subpage").css({"top":resize_top});
    });
    $("#off").click(function(){
      remove($offset,'off');
    });
    $("#on").live("click",function(){
      remove($offset,'on');
    })
  }
  //change active
  $("td").click(function(){
    if($(this).hasClass("td-col")){
      $("tr .active").removeClass("active");
      var td = $(this).parent().children();
      td.each(function(){
        $(this).addClass("active");
      });
    } else if($(this).hasClass("td-star-e")) {
      $(this).removeClass("td-star-e").addClass("td-star-f");
    } else if($(this).hasClass("td-star-f")) {
      $(this).removeClass("td-star-f").addClass("td-star-e");
    }
    return false;
  });
});